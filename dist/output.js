(()=>{const e=document.querySelectorAll("input"),t=document.querySelector("body"),l=document.querySelector(".time-section"),r=document.querySelector(".start"),a=document.querySelector(".reset"),n=document.querySelector(".stop"),c=document.querySelectorAll("button");let u,s,o=!0,i=0,d=!1;const v=new Audio("assets/toby.mp3"),h=()=>{let t=[e[0].value,e[1].value,e[2].value],l=[];t.forEach((e=>{let t,r="",a=0;for(let l=0;l<e.length;++l){let n=e.charAt(l);allNumbers=["0","1","2","3","4","5","6","7","8","9"],t=allNumbers.find((e=>e==n)),0==a&&null!=t?r+=t:null==t&&(a=1)}null==t||1==a?l.push(0):l.push(parseInt(r)),l[0]>24?l[0]=24:l[1]>60?l[1]=60:l[2]>60&&(l[2]=60)}));for(let t=0;t<3;++t)e[t].value=l[t]};e.forEach((e=>{e.addEventListener("input",h)}));const p=()=>{if(!d){let t=[];s=setInterval((()=>{let r=0;if(e.forEach((e=>{""==e.value?(++r,t.push(0)):t.push(parseInt(e.value))})),0==t[0]&&0==t[1]&&0==t[2]){o=!0,v.play();let t=document.createElement("img");t.setAttribute("src","assets/Annoying_Dog.webp"),t.classList.add("toby"),l.appendChild(t),clearInterval(s),c.forEach((e=>{e.disabled=!0}));let r=0,a=setInterval((()=>{0==r?e.forEach((e=>{e.style.cssText="color:black",r=1})):1==r&&e.forEach((e=>{e.style.cssText="color:#2B7229",r=0}))}),500);setTimeout((()=>{l.removeChild(t),clearInterval(a),c.forEach((e=>{e.disabled=!1}))}),4e3)}else r>1&&clearInterval(s);t=[]}),1e3)}},f=([t,l,r])=>{u=setInterval((()=>{if((0!=t||0!=l||0!=r)&&(r>0||l>0&&0==r||t>0)){if(0!=r&&r!=--r&&(e[2].value=r),l>0&&0==r){let t=l;--l,r=60,setTimeout((()=>{t!=l&&(e[1].value=l)}),1e3)}if(t>0&&0==l&&0==r){let a=t;--t,l=60,setTimeout((()=>{a!=t&&(e[0].value=t,e[1].value=59,e[2].value=59,l=59,r=59)}),1e3)}}}),1e3)};e.forEach((t=>{t.addEventListener("click",(l=>{e.forEach((e=>{""==e.value&&(e.value=0)})),t.value=""}))})),r.addEventListener("click",(()=>{(()=>{if(1==o){let t=[];e.forEach((e=>{""==e.value?t.push(0):t.push(parseInt(e.value))})),f(t),o=!1,0==t[0]&&0==t[1]&&0==t[2]&&(o=!0)}else if(0==o){let e=document.createElement("div");e.innerText="Click 'reset' to start a new pomodoro",e.classList.add("currentlyStarted"),t.appendChild(e),o="standBy"}})(),p()})),a.addEventListener("click",(()=>{e.forEach((e=>{e.value=""}));let l=document.querySelector(".currentlyStarted");null!=l&&t.removeChild(l),o=!0,n.innerText="Stop",i=0,clearInterval(u)})),n.addEventListener("click",(()=>{if(0==i)clearInterval(s),clearInterval(u),n.innerText="Resume",i=1,d=!0;else if(1==i){let t=[];e.forEach((e=>{""==e.value?t.push(0):t.push(parseInt(e.value))})),d=!1,p(),f(t),n.innerText="Stop",i=0}o=!1}))})();