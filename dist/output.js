(()=>{const e=document.querySelectorAll("input"),t=document.querySelector("body"),l=document.querySelector(".time-section"),a=document.querySelector(".start"),r=document.querySelector(".reset"),n=document.querySelector(".stop"),c=document.querySelectorAll("button");let s,o,u=!0,d=0,i=!1;const v=new Audio("assets/toby.mp3"),h=()=>{let t=[];e.forEach((e=>{t.push(e.value)})),1==t.some((e=>""==e))||0==t[0]&&0==t[1]&&0==t[2]?c.forEach((e=>{e.disabled=!0})):c.forEach((e=>{e.disabled=!1}))};t.addEventListener("click",h),e.forEach((t=>{t.addEventListener("input",(()=>{(()=>{let t=[e[0].value,e[1].value,e[2].value],l=[];t.forEach((e=>{let t,a="",r=0;for(let l=0;l<e.length;++l){let n=e.charAt(l);allNumbers=["0","1","2","3","4","5","6","7","8","9"],t=allNumbers.find((e=>e==n)),0==r&&null!=t?a+=t:null==t&&(r=1)}null==t||1==r?l.push(0):l.push(parseInt(a)),l[0]>24?l[0]=24:l[1]>60?l[1]=60:l[2]>60&&(l[2]=60)}));for(let t=0;t<3;++t)e[t].value=l[t]})(),h()}))}));const f=()=>{if(!i){let t=[];o=setInterval((()=>{let a=0;if(e.forEach((e=>{""==e.value?(++a,t.push(0)):t.push(parseInt(e.value))})),0==t[0]&&0==t[1]&&0==t[2]&&a<2){u=!0,v.play();let t=document.createElement("img");t.setAttribute("src","assets/Annoying_Dog.webp"),t.classList.add("toby"),l.appendChild(t),clearInterval(o),c.forEach((e=>{e.disabled=!0}));let a=0,r=setInterval((()=>{0==a?e.forEach((e=>{e.style.cssText="color:black",a=1})):1==a&&e.forEach((e=>{e.style.cssText="color:#2B7229",a=0}))}),500);setTimeout((()=>{l.removeChild(t),clearInterval(r),c.forEach((e=>{e.disabled=!1}))}),4e3)}else a>1&&clearInterval(o);t=[]}),1e3)}},p=([t,l,a])=>{s=setInterval((()=>{if((0!=t||0!=l||0!=a)&&(a>0||l>0&&0==a||t>0)){if(0!=a&&a!=--a&&(e[2].value=a),l>0&&0==a){let t=l;--l,a=60,setTimeout((()=>{t!=l&&(e[1].value=l)}),1e3)}if(t>0&&0==l&&0==a){let r=t;--t,l=60,setTimeout((()=>{r!=t&&(e[0].value=t,e[1].value=59,e[2].value=59,l=59,a=59)}),1e3)}}}),1e3)};e.forEach((t=>{t.addEventListener("click",(l=>{h(),e.forEach((e=>{""==e.value&&(e.value=0)})),t.value=""}))})),a.addEventListener("click",(()=>{(()=>{if(1==u){let t=[];e.forEach((e=>{""==e.value?t.push(0):t.push(parseInt(e.value))})),p(t),u=!1,0==t[0]&&0==t[1]&&0==t[2]&&(u=!0)}else if(0==u){let e=document.createElement("div");e.innerText="Click 'reset' to start a new pomodoro",e.classList.add("currentlyStarted"),t.appendChild(e),u="standBy"}})(),f()})),r.addEventListener("click",(()=>{e.forEach((e=>{e.value=""}));let l=document.querySelector(".currentlyStarted");null!=l&&t.removeChild(l),u=!0,n.innerText="Stop",d=0,clearInterval(s)})),n.addEventListener("click",(()=>{if(0==d)clearInterval(o),clearInterval(s),n.innerText="Resume",d=1,i=!0;else if(1==d){let t=[];e.forEach((e=>{""==e.value?t.push(0):t.push(parseInt(e.value))})),i=!1,f(),p(t),n.innerText="Stop",d=0}u=!1}))})();