(()=>{const e=document.querySelectorAll("input"),t=document.querySelector("body"),l=document.querySelector(".time-section"),a=document.querySelector(".start"),r=document.querySelector(".reset"),s=document.querySelector(".stop"),o=document.querySelectorAll("button");let c,n,u=!0,d=0,i=!1;const v=new Audio("assets/toby.mp3"),h=()=>{let t=[];e.forEach((e=>{t.push(e.value)})),1==t.some((e=>""==e))||0==t[0]&&0==t[1]&&0==t[2]?o.forEach((e=>{e.disabled=!0})):(o.forEach((e=>{e.disabled=!1})),i&&(a.disabled=!0))};e.forEach((t=>{t.addEventListener("input",(()=>{(()=>{let t=[e[0].value,e[1].value,e[2].value],l=[];t.forEach((e=>{let t,a="",r=0;for(let l=0;l<e.length;++l){let s=e.charAt(l);allNumbers=["0","1","2","3","4","5","6","7","8","9"],t=allNumbers.find((e=>e==s)),0==r&&null!=t?a+=t:null==t&&(r=1)}null==t||1==r?l.push(0):l.push(parseInt(a)),l[0]>24?l[0]=24:l[1]>60?l[1]=60:l[2]>60&&(l[2]=60)}));for(let t=0;t<3;++t)e[t].value=l[t]})(),h()}))}));const m=()=>{if(!i){let t=[];n=setInterval((()=>{let a=0;if(e.forEach((e=>{""==e.value?(++a,t.push(0)):t.push(parseInt(e.value))})),0==t[0]&&0==t[1]&&0==t[2]&&a<2){u=!0,v.play();let t=document.createElement("img");t.setAttribute("src","assets/Annoying_Dog.webp"),t.classList.add("toby"),l.appendChild(t),clearInterval(n),o.forEach((e=>{e.disabled=!0}));let a=0,r=setInterval((()=>{0==a?e.forEach((e=>{e.style.cssText="color:black",a=1})):1==a&&e.forEach((e=>{e.style.cssText="color:#2B7229",a=0}))}),500);setTimeout((()=>{l.removeChild(t),clearInterval(r),o.forEach((e=>{e.disabled=!1})),h()}),4e3)}else a>1&&clearInterval(n);t=[]}),1e3)}},p=([t,l,a])=>{c=setInterval((()=>{if((0!=t||0!=l||0!=a)&&(a>0||l>0&&0==a||t>0)){if(0!=a&&a!=--a&&(e[2].value=a),l>0&&0==a){let t=l;--l,a=60,setTimeout((()=>{t!=l&&(e[1].value=l)}),1e3)}if(t>0&&0==l&&0==a){let r=t;--t,l=60,setTimeout((()=>{r!=t&&(e[0].value=t,e[1].value=59,e[2].value=59,l=59,a=59)}),1e3)}}}),1e3)};e.forEach((t=>{t.addEventListener("click",(l=>{h(),e.forEach((e=>{""==e.value&&(e.value=0)})),t.value=""}))})),a.addEventListener("click",(()=>{(()=>{setTimeout((()=>{a.disabled=!0}),10);let l=[];e.forEach((e=>{""==e.value?l.push(0):l.push(parseInt(e.value))})),p(l),u=!1;let r=document.createElement("div");r.innerText="Click 'reset' to start a new pomodoro",r.classList.add("currentlyStarted"),t.appendChild(r),u="standBy",setTimeout((()=>{r.classList.add("disappear")}),1500),setTimeout((()=>{t.removeChild(r)}),6e3)})(),m()})),r.addEventListener("click",(()=>{e.forEach((e=>{e.value=""})),u=!0,s.innerText="Stop",d=0,clearInterval(c),i=!1})),s.addEventListener("click",(()=>{if(0==d)clearInterval(n),clearInterval(c),s.innerText="Resume",d=1,i=!0;else if(1==d){let t=[];e.forEach((e=>{""==e.value?t.push(0):t.push(parseInt(e.value))})),i=!1,m(),p(t),s.innerText="Stop",d=0}setTimeout((()=>{a.disabled=!0}),10),u=!1})),t.addEventListener("click",h)})();